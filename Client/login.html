

    <main>
        <div class="container">
            <div class="left">
                <h1>Sign in</h1>
                <p>Welcome to TrustyTicket</p>
                <form id="target" action="">
                    <span id="error"></span>
                    <input id="api_function_call" type="hidden" name="api_function_call" value="login">
                    <input id="username" type="text" placeholder="Your username" name="username" required>
                    <input id="password" type="password" placeholder="Your password" name="password" required>
                    <button type="submit">Next</button>
                </form>
                <p>Don't have an account yet? <a href="?action=register">Sign up</a></p>
            </div>
            <div class="right"></div>
        </div>
    </main>

<script>

    $('#target').submit(function(event) {
        event.preventDefault();
        var apiCall=$("#api_function_call").val();
        var type='POST';
        var formData=$(this).serialize();
        var error=$("#error");
        var data={};
        
        $.ajax({
            type: type,
            url: 'http://localhost/project/trustyticket/serviceProvider/API.php',
            data: formData , 
            dataType: 'json',
            encode: true
        })
        .done(function(data) {
            console.log(data);
            var errorValue=false;
            if(data['invalid_login']){
                error.html(data['invalid_login']);
                errorValue=true;
            }
            if(!errorValue){
                window.location.href="http://localhost/project/trustyticket";
            }
    
        })
        .fail(function(jqXHR, textStatus, errorThrown) {
                console.error('Error:', textStatus, errorThrown);
                console.log(data);
        });
    });
</script>